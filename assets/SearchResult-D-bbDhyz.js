import{f as N,u as V,g as X,h as Z,j as ee,t as se,i as le,k,l as g,m as e,n as te,p as Ee,s as ae,R as q,q as Be,v as re,x as Ae,y as oe,z as ue,A as L,B as $,C as ie,D as ce,E as ne,F as me,L as he,G as ve,H as de,I as Fe,J as M,K as Ce,M as _}from"./app-Dd3nuh7T.js";const pe=["/Example.html","/Home.html","/","/assets_/WolframAlpha.html","/assets_/%E5%85%AC%E5%BC%8F%E7%BC%96%E8%BE%91%E5%99%A8.html","/assets_/%E8%8D%89%E7%A8%BF.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/-%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0-.html","/assets_/Callouts/Callouts-Abstract.html","/assets_/Callouts/Callouts-Bug.html","/assets_/Callouts/Callouts-ChatGPT.html","/assets_/Callouts/Callouts-Danger.html","/assets_/Callouts/Callouts-Example.html","/assets_/Callouts/Callouts-Failure.html","/assets_/Callouts/Callouts-Info.html","/assets_/Callouts/Callouts-Note.html","/assets_/Callouts/Callouts-Question.html","/assets_/Callouts/Callouts-Quote.html","/assets_/Callouts/Callouts-Success.html","/assets_/Callouts/Callouts-Tips.html","/assets_/Callouts/Callouts-Todo.html","/assets_/Callouts/Callouts-Warning.html","/assets_/Callouts/Callouts%E8%AF%AD%E6%B3%95.html","/assets_/Template/template-default.html","/assets_/Template/template-todo.html","/assets_/Template/template-%E5%A4%8D%E5%88%86%E6%9E%90.html","/assets_/Template/template-%E5%BE%AE%E7%A7%AF%E5%88%86.html","/assets_/Template/template-%E6%A6%82%E7%8E%87%E8%AE%BA.html","/assets_/Template/template-%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0.html","/assets_/dataview%E6%9F%A5%E8%AF%A2/%E5%85%AC%E5%BC%8F.html","/assets_/dataview%E6%9F%A5%E8%AF%A2/%E6%9D%B1%E5%B7%A5%E9%81%8E%E5%8E%BB%E5%95%8F.html","/assets_/dataview%E6%9F%A5%E8%AF%A2/%E7%A9%BA%E5%B1%9E%E6%80%A7%E6%A3%80%E7%B4%A2.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/--%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0--.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E5%8D%95%E7%BA%AF%E5%BD%A2%E6%B3%95.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E5%8F%A4%E5%85%B8%E8%BF%AD%E4%BB%A3%E6%B3%95.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E5%AF%B9%E7%A7%B0%E7%89%B9%E5%BE%81%E5%80%BC%E9%97%AE%E9%A2%98%E7%9A%84%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%8F%E5%BA%A6%E5%88%86%E6%9E%90%E4%B8%8E%E8%AF%AF%E5%B7%AE%E5%88%86%E6%9E%90.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%9C%80%E5%B0%8F%E4%BA%8C%E4%B9%98%E9%97%AE%E9%A2%98.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%A2%AF%E5%BA%A6%E6%B3%95.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E7%BA%BF%E6%80%A7%E6%96%B9%E7%A8%8B%E7%BB%84%E7%9A%84%E7%9B%B4%E6%8E%A5%E8%A7%A3%E6%B3%95.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E9%9D%9E%E5%AF%B9%E7%A7%B0%E7%89%B9%E5%BE%81%E5%80%BC%E9%97%AE%E9%A2%98%E7%9A%84%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E7%9F%A9%E9%98%B5/--%E7%9F%A9%E9%98%B5--.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E7%9F%A9%E9%98%B5/QR%E5%88%86%E8%A7%A3.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E7%9F%A9%E9%98%B5/Schur%E5%88%86%E8%A7%A3.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E7%9F%A9%E9%98%B5/%E6%AD%A3%E5%AE%9A%E6%80%A7.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E7%9F%A9%E9%98%B5/%E7%9F%A9%E9%98%B5%E6%89%B0%E5%8A%A8.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E7%9F%A9%E9%98%B5/%E7%9F%A9%E9%98%B5%E8%8C%83%E6%95%B0.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E7%9F%A9%E9%98%B5/%E7%A7%A9.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E8%A1%8C%E5%88%97%E5%BC%8F/--%E8%A1%8C%E5%88%97%E5%BC%8F--.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E8%A1%8C%E5%88%97%E5%BC%8F/%E6%8B%89%E6%99%AE%E6%8B%89%E6%96%AF%E5%B1%95%E5%BC%80%E6%B3%95.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E8%A1%8C%E5%88%97%E5%BC%8F/%E8%A1%8C%E5%88%97%E5%BC%8F.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E8%A1%8C%E5%88%97%E5%BC%8F/%E8%A1%8C%E5%88%97%E5%BC%8F%E6%80%A7%E8%B4%A8.html","/404.html","/assets_/","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/","/assets_/Callouts/","/assets_/Template/","/assets_/dataview%E6%9F%A5%E8%AF%A2/","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E7%9F%A9%E9%98%B5/","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E8%A1%8C%E5%88%97%E5%BC%8F/","/category/","/tag/","/tag/%E6%95%B0%E5%AD%A6/","/tag/%E5%B7%A5%E5%85%B7/","/tag/todo/","/tag/dataview/","/Blog/","/star/","/timeline/"],ye="SLIMSEARCH_QUERY_HISTORY",d=M(ye,[]),ge=()=>{const{queryHistoryCount:E}=_;return{enabled:E>0,queryHistories:d,addQueryHistory:A=>{d.value=Array.from(new Set([A,...d.value.slice(0,E-1)]))},removeQueryHistory:A=>{d.value=[...d.value.slice(0,A),...d.value.slice(A+1)]}}},R=E=>pe[E.id]+("anchor"in E?`#${E.anchor}`:""),_e="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:I}=_,F=M(_e,[]),fe=()=>({enabled:I>0,resultHistories:F,addResultHistory:r=>{{const A={link:R(r),display:r.display};"header"in r&&(A.header=r.header),F.value=[A,...F.value.slice(0,I-1)]}},removeResultHistory:r=>{F.value=[...F.value.slice(0,r),...F.value.slice(r+1)]}}),He=E=>{const{page:r,routeLocale:A}=ie(),f=ce(),a=k(0),C=g(()=>a.value>0),i=ne([]);return me(()=>{const{search:H,terminate:m}=he(),p=de(h=>{const{resultsFilter:w=t=>t,querySplitter:v,suggestionsFilter:S,...B}=f.value;h?(a.value+=1,H(h,A.value,B).then(t=>w(t,h,A.value,r.value)).then(t=>{a.value-=1,i.value=t}).catch(t=>{console.warn(t),a.value-=1,a.value||(i.value=[])})):i.value=[]},_.searchDelay-_.suggestDelay,{maxWait:5e3});ve([E,A],([h])=>p(h.join(" "))),Fe(()=>{m()})}),{isSearching:C,results:i}};var De=N({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(E,{emit:r}){const A=V(),f=X(),a=Z(ee),{addQueryHistory:C,queryHistories:i,removeQueryHistory:H}=ge(),{resultHistories:m,addResultHistory:p,removeResultHistory:h}=fe(),w=se(E,"queries"),{results:v,isSearching:S}=He(w),B=le({isQuery:!0,index:0}),t=k(0),c=k(0),b=g(()=>i.value.length>0||m.value.length>0),D=g(()=>v.value.length>0),x=g(()=>v.value[t.value]||null),j=()=>{const{isQuery:s,index:l}=B;l===0?(B.isQuery=!s,B.index=s?m.value.length-1:i.value.length-1):B.index=l-1},P=()=>{const{isQuery:s,index:l}=B;l===(s?i.value.length-1:m.value.length-1)?(B.isQuery=!s,B.index=0):B.index=l+1},U=()=>{t.value=t.value>0?t.value-1:v.value.length-1,c.value=x.value.contents.length-1},O=()=>{t.value=t.value<v.value.length-1?t.value+1:0,c.value=0},W=()=>{c.value<x.value.contents.length-1?c.value+=1:O()},Y=()=>{c.value>0?c.value-=1:U()},Q=s=>s.map(l=>Ce(l)?l:e(l[0],l[1])),G=s=>{if(s.type==="customField"){const l=oe[s.index]||"$content",[n,o=""]=ue(l)?l[f.value].split("$content"):l.split("$content");return s.display.map(u=>e("div",Q([n,...u,o])))}return s.display.map(l=>e("div",Q(l)))},y=()=>{t.value=0,c.value=0,r("updateQuery",""),r("close")},z=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},a.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},i.value.map((s,l)=>{const n=B.isQuery&&B.index===l;return e("li",{class:["slimsearch-record-matches",{active:n}],role:"option","aria-selected":n,onClick:()=>{r("updateQuery",s)}},e("div",[e(L,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},s),e("button",{type:"button",class:"slimsearch-remove-icon",title:a.value.remove,"aria-label":a.value.remove,innerHTML:$,onClick:o=>{o.preventDefault(),o.stopPropagation(),H(l)}})]))}))])),J=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},a.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},m.value.map((s,l)=>{const n=!B.isQuery&&B.index===l;return e("li",{class:["slimsearch-record-matches",{active:n}],role:"option","aria-selected":n},e(q,{to:s.link,onClick:()=>{y()}},()=>[e(L,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[s.header?e("div",{class:"slimsearch-record-content-header"},s.header):null,e("div",s.display.map(o=>Q(o)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:a.value.remove,"aria-label":a.value.remove,innerHTML:$,onClick:o=>{o.preventDefault(),o.stopPropagation(),h(l)}})]))}))]));return te("keydown",s=>{if(E.isFocusing){if(D.value){if(s.key==="ArrowUp")Y();else if(s.key==="ArrowDown")W();else if(s.key==="Enter"){const l=x.value.contents[c.value];C(E.queries.join(" ")),p(l),A.push(R(l)),y()}}else if(s.key==="ArrowUp")j();else if(s.key==="ArrowDown")P();else if(s.key==="Enter"){const{index:l}=B;B.isQuery?(s.preventDefault(),r("updateQuery",i.value[l])):(A.push(m.value[l].link),y())}}}),Ee([t,c],()=>{var s;(s=document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active"))==null||s.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:E.queries.length?!D.value:!b.value}]},E.queries.length?S.value?e(ae,{hint:a.value.searching}):D.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},v.value.map(({title:s,contents:l},n)=>{const o=t.value===n;return e("div",{class:["slimsearch-record",{active:o}],role:"group","aria-selected":o},[e("div",{class:"slimsearch-record-title"},s||a.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},l.map((u,K)=>{const T=o&&c.value===K;return e("li",{class:["slimsearch-record-matches",{active:T}],role:"option","aria-selected":T},e(q,{to:R(u),onClick:()=>{C(E.queries.join(" ")),p(u),y()}},()=>[u.type==="text"?null:e(u.type==="title"?Be:u.type==="heading"?re:Ae,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[u.type==="text"&&u.header?e("div",{class:"slimsearch-record-content-header"},u.header):null,e("div",G(u))])]))}))])})):a.value.emptyResult:b.value?[z(),J()]:a.value.emptyHistory)}});export{De as default};
