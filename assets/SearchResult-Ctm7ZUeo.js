import{f as N,u as V,g as X,h as Z,j as ee,t as se,i as le,k as Q,l as g,m as e,n as te,p as ae,s as Ee,R as q,q as Be,v as re,x as oe,y as ue,z as ie,A as L,B as $,C as Ae,D as ce,E as ne,F as me,L as he,G as ve,H as de,I as Ce,J as M,K as pe,M as _}from"./app-InC6dyF_.js";const Fe=["/Example.html","/Home.html","/","/assets_/WolframAlpha.html","/assets_/%E5%85%AC%E5%BC%8F%E7%BC%96%E8%BE%91%E5%99%A8.html","/assets_/%E8%8D%89%E7%A8%BF.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/-%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0-.html","/assets_/Callouts/Callouts-Abstract.html","/assets_/Callouts/Callouts-Bug.html","/assets_/Callouts/Callouts-ChatGPT.html","/assets_/Callouts/Callouts-Danger.html","/assets_/Callouts/Callouts-Example.html","/assets_/Callouts/Callouts-Failure.html","/assets_/Callouts/Callouts-Info.html","/assets_/Callouts/Callouts-Note.html","/assets_/Callouts/Callouts-Question.html","/assets_/Callouts/Callouts-Quote.html","/assets_/Callouts/Callouts-Success.html","/assets_/Callouts/Callouts-Tips.html","/assets_/Callouts/Callouts-Todo.html","/assets_/Callouts/Callouts-Warning.html","/assets_/Callouts/Callouts%E8%AF%AD%E6%B3%95.html","/assets_/Template/template-default.html","/assets_/Template/template-todo.html","/assets_/Template/template-%E5%A4%8D%E5%88%86%E6%9E%90.html","/assets_/Template/template-%E5%BE%AE%E7%A7%AF%E5%88%86.html","/assets_/Template/template-%E6%A6%82%E7%8E%87%E8%AE%BA.html","/assets_/Template/template-%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0.html","/assets_/dataview%E6%9F%A5%E8%AF%A2/%E5%85%AC%E5%BC%8F.html","/assets_/dataview%E6%9F%A5%E8%AF%A2/%E6%9D%B1%E5%B7%A5%E9%81%8E%E5%8E%BB%E5%95%8F.html","/assets_/dataview%E6%9F%A5%E8%AF%A2/%E7%A9%BA%E5%B1%9E%E6%80%A7%E6%A3%80%E7%B4%A2.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/--%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0--.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E5%8D%95%E7%BA%AF%E5%BD%A2%E6%B3%95.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E5%8F%A4%E5%85%B8%E8%BF%AD%E4%BB%A3%E6%B3%95.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E5%AF%B9%E7%A7%B0%E7%89%B9%E5%BE%81%E5%80%BC%E9%97%AE%E9%A2%98%E7%9A%84%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%8F%E5%BA%A6%E5%88%86%E6%9E%90%E4%B8%8E%E8%AF%AF%E5%B7%AE%E5%88%86%E6%9E%90.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%9C%80%E5%B0%8F%E4%BA%8C%E4%B9%98%E9%97%AE%E9%A2%98.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%A2%AF%E5%BA%A6%E6%B3%95.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E7%BA%BF%E6%80%A7%E6%96%B9%E7%A8%8B%E7%BB%84%E7%9A%84%E7%9B%B4%E6%8E%A5%E8%A7%A3%E6%B3%95.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E9%9D%9E%E5%AF%B9%E7%A7%B0%E7%89%B9%E5%BE%81%E5%80%BC%E9%97%AE%E9%A2%98%E7%9A%84%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E8%A1%8C%E5%88%97%E5%BC%8F/--%E8%A1%8C%E5%88%97%E5%BC%8F--.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E8%A1%8C%E5%88%97%E5%BC%8F/%E6%8B%89%E6%99%AE%E6%8B%89%E6%96%AF%E5%B1%95%E5%BC%80%E6%B3%95.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E8%A1%8C%E5%88%97%E5%BC%8F/%E8%A1%8C%E5%88%97%E5%BC%8F.html","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E8%A1%8C%E5%88%97%E5%BC%8F/%E8%A1%8C%E5%88%97%E5%BC%8F%E6%80%A7%E8%B4%A8.html","/404.html","/assets_/","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/","/assets_/Callouts/","/assets_/Template/","/assets_/dataview%E6%9F%A5%E8%AF%A2/","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E6%95%B0%E5%80%BC%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/","/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/%E8%A1%8C%E5%88%97%E5%BC%8F/","/category/","/tag/","/tag/%E6%95%B0%E5%AD%A6/","/tag/%E5%B7%A5%E5%85%B7/","/tag/todo/","/tag/dataview/","/Blog/","/star/","/timeline/"],ye="SLIMSEARCH_QUERY_HISTORY",d=M(ye,[]),ge=()=>{const{queryHistoryCount:a}=_;return{enabled:a>0,queryHistories:d,addQueryHistory:o=>{d.value=Array.from(new Set([o,...d.value.slice(0,a-1)]))},removeQueryHistory:o=>{d.value=[...d.value.slice(0,o),...d.value.slice(o+1)]}}},R=a=>Fe[a.id]+("anchor"in a?`#${a.anchor}`:""),_e="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:I}=_,C=M(_e,[]),fe=()=>({enabled:I>0,resultHistories:C,addResultHistory:r=>{{const o={link:R(r),display:r.display};"header"in r&&(o.header=r.header),C.value=[o,...C.value.slice(0,I-1)]}},removeResultHistory:r=>{C.value=[...C.value.slice(0,r),...C.value.slice(r+1)]}}),He=a=>{const{page:r,routeLocale:o}=Ae(),f=ce(),E=Q(0),p=g(()=>E.value>0),A=ne([]);return me(()=>{const{search:H,terminate:m}=he(),F=de(h=>{const{resultsFilter:w=t=>t,querySplitter:v,suggestionsFilter:b,...B}=f.value;h?(E.value+=1,H(h,o.value,B).then(t=>w(t,h,o.value,r.value)).then(t=>{E.value-=1,A.value=t}).catch(t=>{console.warn(t),E.value-=1,E.value||(A.value=[])})):A.value=[]},_.searchDelay-_.suggestDelay,{maxWait:5e3});ve([a,o],([h])=>F(h.join(" "))),Ce(()=>{m()})}),{isSearching:p,results:A}};var xe=N({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:r}){const o=V(),f=X(),E=Z(ee),{addQueryHistory:p,queryHistories:A,removeQueryHistory:H}=ge(),{resultHistories:m,addResultHistory:F,removeResultHistory:h}=fe(),w=se(a,"queries"),{results:v,isSearching:b}=He(w),B=le({isQuery:!0,index:0}),t=Q(0),c=Q(0),S=g(()=>A.value.length>0||m.value.length>0),x=g(()=>v.value.length>0),D=g(()=>v.value[t.value]||null),j=()=>{const{isQuery:s,index:l}=B;l===0?(B.isQuery=!s,B.index=s?m.value.length-1:A.value.length-1):B.index=l-1},P=()=>{const{isQuery:s,index:l}=B;l===(s?A.value.length-1:m.value.length-1)?(B.isQuery=!s,B.index=0):B.index=l+1},U=()=>{t.value=t.value>0?t.value-1:v.value.length-1,c.value=D.value.contents.length-1},O=()=>{t.value=t.value<v.value.length-1?t.value+1:0,c.value=0},W=()=>{c.value<D.value.contents.length-1?c.value+=1:O()},Y=()=>{c.value>0?c.value-=1:U()},k=s=>s.map(l=>pe(l)?l:e(l[0],l[1])),G=s=>{if(s.type==="customField"){const l=ue[s.index]||"$content",[n,u=""]=ie(l)?l[f.value].split("$content"):l.split("$content");return s.display.map(i=>e("div",k([n,...i,u])))}return s.display.map(l=>e("div",k(l)))},y=()=>{t.value=0,c.value=0,r("updateQuery",""),r("close")},z=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},E.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},A.value.map((s,l)=>{const n=B.isQuery&&B.index===l;return e("li",{class:["slimsearch-record-matches",{active:n}],role:"option","aria-selected":n,onClick:()=>{r("updateQuery",s)}},e("div",[e(L,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},s),e("button",{type:"button",class:"slimsearch-remove-icon",title:E.value.remove,"aria-label":E.value.remove,innerHTML:$,onClick:u=>{u.preventDefault(),u.stopPropagation(),H(l)}})]))}))])),J=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},E.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},m.value.map((s,l)=>{const n=!B.isQuery&&B.index===l;return e("li",{class:["slimsearch-record-matches",{active:n}],role:"option","aria-selected":n},e(q,{to:s.link,onClick:()=>{y()}},()=>[e(L,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[s.header?e("div",{class:"slimsearch-record-content-header"},s.header):null,e("div",s.display.map(u=>k(u)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:E.value.remove,"aria-label":E.value.remove,innerHTML:$,onClick:u=>{u.preventDefault(),u.stopPropagation(),h(l)}})]))}))]));return te("keydown",s=>{if(a.isFocusing){if(x.value){if(s.key==="ArrowUp")Y();else if(s.key==="ArrowDown")W();else if(s.key==="Enter"){const l=D.value.contents[c.value];p(a.queries.join(" ")),F(l),o.push(R(l)),y()}}else if(s.key==="ArrowUp")j();else if(s.key==="ArrowDown")P();else if(s.key==="Enter"){const{index:l}=B;B.isQuery?(s.preventDefault(),r("updateQuery",A.value[l])):(o.push(m.value[l].link),y())}}}),ae([t,c],()=>{var s;(s=document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active"))==null||s.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:a.queries.length?!x.value:!S.value}]},a.queries.length?b.value?e(Ee,{hint:E.value.searching}):x.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},v.value.map(({title:s,contents:l},n)=>{const u=t.value===n;return e("div",{class:["slimsearch-record",{active:u}],role:"group","aria-selected":u},[e("div",{class:"slimsearch-record-title"},s||E.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},l.map((i,K)=>{const T=u&&c.value===K;return e("li",{class:["slimsearch-record-matches",{active:T}],role:"option","aria-selected":T},e(q,{to:R(i),onClick:()=>{p(a.queries.join(" ")),F(i),y()}},()=>[i.type==="text"?null:e(i.type==="title"?Be:i.type==="heading"?re:oe,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[i.type==="text"&&i.header?e("div",{class:"slimsearch-record-content-header"},i.header):null,e("div",G(i))])]))}))])})):E.value.emptyResult:S.value?[z(),J()]:E.value.emptyHistory)}});export{xe as default};
